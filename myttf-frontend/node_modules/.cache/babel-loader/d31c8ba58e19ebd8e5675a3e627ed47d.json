{"ast":null,"code":"import _objectSpread from \"/Users/baronlip/Documents/FlatIronSchool/_bootcamp/Module_5_React-Redux/myttf_r-r_app/myttf-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n// fetchMatches is no longer needed since fetchPlayer now contains all match info.\n// export const fetchMatches = (player) => {\n//     console.log(\"actions/MatchActions.js fetchMatches\");\n//     return (dispatch) => {\n//         debugger\n//         fetch(`http://localhost:3000/api/v1/players/${player.id}/matches`)\n//             .then(response => response.json())\n//             // .then(matches => console.log(matches))\n//             .then(matches => dispatch(setMatches(matches)))\n//             .catch(error => console.log(error))\n//     };\n// }\n// export const setMatches = (matches) => {\n//     return {type: \"FETCH_MATCHES\", matches}\n// }\n// export const showMatch = (match) => {\n//     console.log(\"actions/MatchActions.js showMatch\", match);\n//     return { type: \"SHOW_MATCH\", match };\n// }\nexport const createMatch = (match, player) => {\n  console.log(\"Creating a new match.\", match, player); // Post the match via fetch to the server...\n\n  return dispatch => fetch(`http://localhost:3000/api/v1/players/${player.id}/matches`, {\n    method: \"POST\",\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(match)\n  }).then(response => {\n    console.log(response);\n\n    if (response.ok) {\n      return response.json();\n    } else {\n      throw new Error(`${response.statusText}`);\n    } // // Needs experimental syntax plugin in order to throw expression.\n    // if (!response.ok) {\n    //     response.text().then(text => throw Error(text))\n    // }\n    // else {\n    //     return response.json();\n    // }\n\n  }) // ...reflect the added match to the window...\n  .then(match => {\n    dispatch(addMatch(match));\n  }) // ...or show an error.\n  .catch(error => alert(error));\n};\nexport const addMatch = match => {\n  console.log(\"actions/MatchActions.js addMatch\", match);\n  return {\n    type: \"ADD_MATCH\",\n    match\n  };\n};\nexport const deleteMatch = match => {\n  console.log(\"actions/MatchActions.js deleteMatch\", match); // debugger\n\n  return dispatch => fetch(`http://localhost:3000/api/v1/players/${match.player_id}/matches/${match.id}`, {\n    method: \"DELETE\"\n  }).then(() => {\n    dispatch(removeMatch(match.id));\n  }).catch(error => console.log(error));\n};\nexport const removeMatch = matchId => {\n  console.log(\"actions/MatchActions.js removeMatch\", matchId);\n  return {\n    type: \"REMOVE_MATCH\",\n    matchId\n  };\n};\nexport const bookmark = match => {\n  console.log(\"You're bookmarking this match.\", match);\n\n  let newMatch = _objectSpread({}, match);\n\n  if (match.bookmarked === null || match.bookmarked === false) {\n    newMatch.bookmarked = true;\n  } else {\n    newMatch.bookmarked = false;\n  }\n\n  return dispatch => fetch(`http://localhost:3000/api/v1/players/${match.player_id}/matches/${match.id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      match: newMatch\n    })\n  }).then(() => {\n    dispatch(bookmarkMatch(newMatch));\n  });\n};\nexport const bookmarkMatch = match => {\n  return {\n    type: \"BOOKMARK_MATCH\",\n    match\n  };\n};\nexport const fetchMatch = matchId => {\n  console.log(\"actions/MatchActions.js fetchMatch\", matchId);\n  fetch(`http://localhost:3000/api/v1/match/${matchId}`).then(response => response.json()).then(match => console.log(match)) // .then(match => match)\n  .catch(error => console.log(error));\n}; // \"history\" is provided by React react-router. It's imported in EditMatchForm as { withRouter }. \"history\" is used to redirect.\n\nexport const patchMatch = (match, history) => {\n  console.log(\"MatchAction patchMatch.\", match); // debugger\n\n  return dispatch => fetch(`http://localhost:3000/api/v1/players/${match.match.player_id}/matches/${match.match.id}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(match)\n  }) // Without throwing any errors.\n  // .then(() => { dispatch(editMatch(match));\n  // })\n  .then(response => {\n    if (response.ok) {\n      return response.json();\n    } else {\n      throw new Error(`${response.statusText}`);\n    }\n  }).then(match => {\n    dispatch(editMatch(match));\n  }).then(history.push('/dashboard')).catch(error => alert(error));\n};\nexport const editMatch = match => {\n  console.log(\"You're editing this match.\", match);\n  return {\n    type: \"EDIT_MATCH\",\n    match\n  };\n};","map":{"version":3,"sources":["/Users/baronlip/Documents/FlatIronSchool/_bootcamp/Module_5_React-Redux/myttf_r-r_app/myttf-frontend/src/actions/MatchActions.js"],"names":["createMatch","match","player","console","log","dispatch","fetch","id","method","headers","body","JSON","stringify","then","response","ok","json","Error","statusText","addMatch","catch","error","alert","type","deleteMatch","player_id","removeMatch","matchId","bookmark","newMatch","bookmarked","bookmarkMatch","fetchMatch","patchMatch","history","editMatch","push"],"mappings":"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","sourcesContent":["// fetchMatches is no longer needed since fetchPlayer now contains all match info.\n// export const fetchMatches = (player) => {\n//     console.log(\"actions/MatchActions.js fetchMatches\");\n\n//     return (dispatch) => {\n//         debugger\n//         fetch(`http://localhost:3000/api/v1/players/${player.id}/matches`)\n//             .then(response => response.json())\n//             // .then(matches => console.log(matches))\n//             .then(matches => dispatch(setMatches(matches)))\n//             .catch(error => console.log(error))\n//     };\n// }\n\n// export const setMatches = (matches) => {\n//     return {type: \"FETCH_MATCHES\", matches}\n// }\n\n// export const showMatch = (match) => {\n//     console.log(\"actions/MatchActions.js showMatch\", match);\n//     return { type: \"SHOW_MATCH\", match };\n// }\n\nexport const createMatch = (match, player) => {\n    console.log(\"Creating a new match.\", match, player);\n    // Post the match via fetch to the server...\n    return (dispatch) => \n    fetch(`http://localhost:3000/api/v1/players/${player.id}/matches`, {\n        method: \"POST\",\n        headers: { 'Content-Type':'application/json' }, \n        body: JSON.stringify(match)\n        })\n    .then(response => {\n        console.log(response)\n        if (response.ok) {\n            return response.json()}\n        else {\n            throw new Error(`${response.statusText}`)\n        }\n        // // Needs experimental syntax plugin in order to throw expression.\n        // if (!response.ok) {\n        //     response.text().then(text => throw Error(text))\n        // }\n        // else {\n        //     return response.json();\n        // }\n    })\n    // ...reflect the added match to the window...\n    .then(match => { dispatch( addMatch(match) )})\n    // ...or show an error.\n    .catch(error => alert(error));\n}\n\nexport const addMatch = (match) => {\n    console.log(\"actions/MatchActions.js addMatch\", match);\n    return { type: \"ADD_MATCH\", match };\n}\n\nexport const deleteMatch = (match) => {\n    console.log(\"actions/MatchActions.js deleteMatch\", match);\n    // debugger\n    return dispatch =>\n    fetch(`http://localhost:3000/api/v1/players/${match.player_id}/matches/${match.id}`, {\n        method: \"DELETE\" })\n    .then(() => {dispatch(removeMatch(match.id))})\n    .catch(error => console.log(error))\n}\n\nexport const removeMatch = (matchId) => {\n    console.log(\"actions/MatchActions.js removeMatch\", matchId);\n    return { type: \"REMOVE_MATCH\", matchId } \n}\n\nexport const bookmark = (match) => {\n    console.log(\"You're bookmarking this match.\", match);\n    let newMatch = {...match}\n    if (match.bookmarked === null || match.bookmarked === false) {\n        newMatch.bookmarked = true;\n    } else {\n        newMatch.bookmarked = false;\n    }\n\n    return (dispatch) =>\n    fetch(`http://localhost:3000/api/v1/players/${match.player_id}/matches/${match.id}`, { \n        method: \"PATCH\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({match: newMatch}) \n    })\n    .then(() => {\n        dispatch(bookmarkMatch(newMatch));\n    });\n}\n\nexport const bookmarkMatch = (match) => {\n    return { type: \"BOOKMARK_MATCH\", match }\n}\n\nexport const fetchMatch = (matchId) => {\n    console.log(\"actions/MatchActions.js fetchMatch\", matchId);\n\n    fetch(`http://localhost:3000/api/v1/match/${matchId}`)\n    .then(response => response.json())\n    .then(match => console.log(match))\n    // .then(match => match)\n    .catch(error => console.log(error))\n}\n\n// \"history\" is provided by React react-router. It's imported in EditMatchForm as { withRouter }. \"history\" is used to redirect.\nexport const patchMatch = (match, history) => {\n    console.log(\"MatchAction patchMatch.\", match);\n    // debugger\n    return dispatch =>\n        fetch(`http://localhost:3000/api/v1/players/${match.match.player_id}/matches/${match.match.id}`, {\n    method: \"PATCH\",\n    headers: {\n        \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(match)})\n    // Without throwing any errors.\n    // .then(() => { dispatch(editMatch(match));\n    // })\n    .then(response => {\n        if (response.ok) {\n            return response.json()\n        }\n        else {\n            throw new Error(`${response.statusText}`)\n        }\n    })\n   .then(match => { dispatch(editMatch(match)) })\n   .then(history.push('/dashboard'))\n    .catch(error => alert(error));\n}\n\nexport const editMatch = (match) => {\n    console.log(\"You're editing this match.\", match);\n    return { type: \"EDIT_MATCH\", match }\n}\n"]},"metadata":{},"sourceType":"module"}